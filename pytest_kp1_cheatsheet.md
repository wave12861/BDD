# üß™ –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ Pytest KP1

---

## 1. –û—Å–Ω–æ–≤—ã —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ (Testing framework basics)

**–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç:**
- –õ—é–±–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∏–º—è –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `test_`, —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–º.
- –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ª–æ–≤–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `assert`.

**–ü—Ä–∏–º–µ—Ä:**
```python
def test_sum():
    assert 1 + 1 == 2
```

**–ö–∞–∫ –ø–æ–º–µ—Ç–∏—Ç—å –º–µ—Ç–æ–¥—ã –∫–∞–∫ —Ç–µ—Å—Ç–æ–≤—ã–µ:**
- –ò–º—è —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–ª–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `test_`.
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å—ã, –∏–º—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `Test`.

**–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `@pytest.mark.skip` –∏–ª–∏ `@pytest.mark.skipif`.

**–ü—Ä–∏–º–µ—Ä:**
```python
import pytest

@pytest.mark.skip(reason="Not implemented yet")
def test_feature():
    assert False
```

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:**
- [Pytest Getting Started](https://docs.pytest.org/en/7.1.x/getting-started.html)

---

## 2. Data Driven Testing (DDT)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DDT:**
- –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ —Ñ—É–Ω–∫—Ü–∏—é —Å —Ä–∞–∑–Ω—ã–º–∏ –Ω–∞–±–æ—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.
- –î–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤.

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å DDT –≤ pytest (parametrize):**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `@pytest.mark.parametrize`.

**–ü—Ä–∏–º–µ—Ä:**
```python
import pytest

@pytest.mark.parametrize("a, b, expected", [
    (1, 1, 2),
    (2, 3, 5),
    (10, 5, 15)
])
def test_add(a, b, expected):
    assert a + b == expected
```

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:**
- [Pytest Parametrize](https://docs.pytest.org/en/7.1.x/how-to/parametrize.html)

---

## 3. Preconditions and Postconditions (–§–∏–∫—Å—Ç—É—Ä—ã, pre/postconditions)

**–ß—Ç–æ —Ç–∞–∫–æ–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã?**
–§–∏–∫—Å—Ç—É—Ä–∞ ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç (–∏/–∏–ª–∏ –æ—á–∏—â–∞–µ—Ç) –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∞. –§–∏–∫—Å—Ç—É—Ä—ã –ø–æ–∑–≤–æ–ª—è—é—Ç:
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ, –æ–∫—Ä—É–∂–µ–Ω–∏–µ, —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, —Ñ–∞–π–ª—ã –∏ —Ç.–¥. –¥–æ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–∞.
- –û—á–∏—Å—Ç–∏—Ç—å –∏–ª–∏ –∑–∞–∫—Ä—ã—Ç—å —Ä–µ—Å—É—Ä—Å—ã –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–∞.
- –ò–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏/–æ—á–∏—Å—Ç–∫–∏.
- –°–¥–µ–ª–∞—Ç—å —Ç–µ—Å—Ç—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞.

**–ö–∞–∫ –æ–±—ä—è–≤–∏—Ç—å —Ñ–∏–∫—Å—Ç—É—Ä—É:**
```python
import pytest

@pytest.fixture
def sample_data():
    # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (precondition)
    data = {"user": "test"}
    yield data
    # –û—á–∏—Å—Ç–∫–∞ (postcondition)
    data.clear()
```

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–∫—Å—Ç—É—Ä—É –≤ —Ç–µ—Å—Ç–µ:**
```python
def test_user(sample_data):
    assert sample_data["user"] == "test"
```

**–û–±–ª–∞—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏—è (scope) —Ñ–∏–∫—Å—Ç—É—Ä:**
- `function` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äî –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
- `class` ‚Äî –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –≤ –∫–ª–∞—Å—Å–µ
- `module` ‚Äî –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –≤ —Ñ–∞–π–ª–µ
- `session` ‚Äî –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –≤ –∑–∞–ø—É—Å–∫–µ pytest

```python
@pytest.fixture(scope="module")
def db_connection():
    conn = connect_to_db()
    yield conn
    conn.close()
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Ñ–∏–∫—Å—Ç—É—Ä (autouse):**
–ï—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å `autouse=True`, —Ñ–∏–∫—Å—Ç—É—Ä–∞ –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –≤ –æ–±–ª–∞—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è:
```python
@pytest.fixture(autouse=True)
def setup_and_teardown():
    print("Setup")
    yield
    print("Teardown")
```

**–§–∏–∫—Å—Ç—É—Ä—ã –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã:**
```python
@pytest.fixture
def user():
    return {"name": "Alice"}

@pytest.fixture
def user_with_email(user):
    user["email"] = "alice@example.com"
    return user
```

**–ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∏–∫—Å—Ç—É—Ä—ã:**
- –í —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–∞—Ö (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–∞–º)
- –í —Ñ–∞–π–ª–µ `conftest.py` ‚Äî –¥–ª—è –æ–±—â–∏—Ö —Ñ–∏–∫—Å—Ç—É—Ä, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ –≤—Å–µ—Ö —Ç–µ—Å—Ç–∞—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

**–ü—Ä–∏–º–µ—Ä —Å–ª–æ–∂–Ω–æ–π —Ñ–∏–∫—Å—Ç—É—Ä—ã:**
```python
import pytest

@pytest.fixture(scope="function")
def temp_file(tmp_path):
    file = tmp_path / "data.txt"
    file.write_text("hello")
    yield file
    # postcondition: —Ñ–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª–∏—Ç—Å—è –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞
```

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:**
- [Pytest Fixtures](https://docs.pytest.org/en/stable/explanation/fixtures.html)
- [conftest.py (geeksforgeeks)](https://www.geeksforgeeks.org/conftest-in-pytest/)

---

**–°–æ–≤–µ—Ç—ã:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—é –¥–ª—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
- –†–∞–∑–¥–µ–ª—è–π—Ç–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –∏ –æ—á–∏—Å—Ç–∫—É —á–µ—Ä–µ–∑ —Ñ–∏–∫—Å—Ç—É—Ä—ã
- –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö pre/postconditions –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è —Ñ–∏–∫—Å—Ç—É—Ä
- –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –ø—Ä–æ `conftest.py` –¥–ª—è –æ–±—â–∏—Ö —Ñ–∏–∫—Å—Ç—É—Ä 